(function(v){typeof define=="function"&&define.amd?define(v):v()})(function(){"use strict";var v=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Ce=window.Components.useField,De=window.Components.VAvatar,xe=window.Components.VDropdown,Me=window.Components.VDropdownButton,Re=window.Components.VDropdownItems,ye=window.Components.VDropdownItem,Te=window.Vue.defineComponent,ee=window.Vue.computed,Se=Te({components:{VAvatar:De,VDropdown:xe,VDropdownButton:Me,VDropdownItems:Re,VDropdownItem:ye},props:{page:{type:Object,required:!0}},setup({page:e}){const{state:t,onChange:n}=Ce(),o=ee(()=>{var i;return(i=e.props.global.users)!=null?i:[]}),s=ee(()=>o.value.filter(i=>`${t.value}`.split(",").includes(`${i.id}`)));return{addUser:i=>{t.value.split(",").includes(`${i.id}`)?t.value=t.value.split(",").filter(c=>c!==`${i.id}`).join(",").trim(","):t.value=`${t.value},${i.id}`,n()},users:o,assegnees:s}}}),te=window.Vue.renderList,ne=window.Vue.Fragment,b=window.Vue.openBlock,P=window.Vue.createElementBlock,I=window.Vue.resolveComponent,se=window.Vue.createBlock,V=window.Vue.createElementVNode,D=window.Vue.withCtx,F=window.Vue.createVNode,je=window.Vue.toDisplayString,Oe=window.Vue.withModifiers,Be=window.Vue.normalizeClass,Ae={class:"flex items-center justify-start"},Ke={class:"flex flex-shrink-0 -space-x-1"},Ne=V("div",{class:"h-7 w-7 focus:outline-none ring-2 ring-white dark:ring-gray-800 dark:bg-gray-700 inline-flex items-center justify-center bg-gray-300 rounded-full"},[V("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[V("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1);function Pe(e,t,n,o,s,r){const i=I("VAvatar"),c=I("VDropdownButton"),u=I("VDropdownItem"),l=I("VDropdownItems"),p=I("VDropdown");return b(),P("div",Ae,[V("div",Ke,[(b(!0),P(ne,null,te(e.assegnees,d=>(b(),se(i,{key:d.id,user:d},null,8,["user"]))),128))]),V("div",null,[F(p,{width:"64"},{default:D(()=>[F(c,null,{default:D(()=>[Ne]),_:1}),F(l,null,{default:D(()=>[(b(!0),P(ne,null,te(e.users,d=>(b(),se(u,{key:d.id,onClick:Oe(()=>e.addUser(d),["prevent"]),class:Be([{"font-semibold":e.assegnees.map(C=>C.id).includes(d.id)},"w-full block whitespace-nowrap truncate"])},{default:D(()=>[V("span",null,je(d.name),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])])}var Fe=v(Se,[["render",Pe]]);function ze(e,t){const n=Object.create(null),o=e.split(",");for(let s=0;s<o.length;s++)n[o[s]]=!0;return t?s=>!!n[s.toLowerCase()]:s=>!!n[s]}const Ue=Object.prototype.hasOwnProperty,x=(e,t)=>Ue.call(e,t),w=Array.isArray,M=e=>oe(e)==="[object Map]",We=e=>typeof e=="string",z=e=>typeof e=="symbol",R=e=>e!==null&&typeof e=="object",ke=Object.prototype.toString,oe=e=>ke.call(e),He=e=>oe(e).slice(8,-1),U=e=>We(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,W=(e,t)=>!Object.is(e,t),k=e=>{const t=new Set(e);return t.w=0,t.n=0,t},Le=e=>(e.w&L)>0,qe=e=>(e.n&L)>0,H=new WeakMap;let L=1,y;const g=Symbol(""),q=Symbol("");let T=!0;const re=[];function Ge(){re.push(T),T=!1}function Ye(){const e=re.pop();T=e===void 0?!0:e}function f(e,t,n){if(!ie())return;let o=H.get(e);o||H.set(e,o=new Map);let s=o.get(n);s||o.set(n,s=k()),ce(s)}function ie(){return T&&y!==void 0}function ce(e,t){let n=!1;qe(e)||(e.n|=L,n=!Le(e)),n&&(e.add(y),y.deps.push(e))}function h(e,t,n,o,s,r){const i=H.get(e);if(!i)return;let c=[];if(t==="clear")c=[...i.values()];else if(n==="length"&&w(e))i.forEach((u,l)=>{(l==="length"||l>=o)&&c.push(u)});else switch(n!==void 0&&c.push(i.get(n)),t){case"add":w(e)?U(n)&&c.push(i.get("length")):(c.push(i.get(g)),M(e)&&c.push(i.get(q)));break;case"delete":w(e)||(c.push(i.get(g)),M(e)&&c.push(i.get(q)));break;case"set":M(e)&&c.push(i.get(g));break}if(c.length===1)c[0]&&G(c[0]);else{const u=[];for(const l of c)l&&u.push(...l);G(k(u))}}function G(e,t){for(const n of w(e)?e:[...e])(n!==y||n.allowRecurse)&&(n.scheduler?n.scheduler():n.run())}const Je=ze("__proto__,__v_isRef,__isVue"),ae=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(z)),Qe=ue(),Xe=ue(!0),le=Ze();function Ze(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const o=a(this);for(let r=0,i=this.length;r<i;r++)f(o,"get",r+"");const s=o[t](...n);return s===-1||s===!1?o[t](...n.map(a)):s}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Ge();const o=a(this)[t].apply(this,n);return Ye(),o}}),e}function ue(e=!1,t=!1){return function(o,s,r){if(s==="__v_isReactive")return!e;if(s==="__v_isReadonly")return e;if(s==="__v_raw"&&r===(e?t?ht:me:t?wt:_e).get(o))return o;const i=w(o);if(!e&&i&&x(le,s))return Reflect.get(le,s,r);const c=Reflect.get(o,s,r);return(z(s)?ae.has(s):Je(s))||(e||f(o,"get",s),t)?c:N(c)?!i||!U(s)?c.value:c:R(c)?e?Ve(c):ge(c):c}}const et=tt();function tt(e=!1){return function(n,o,s,r){let i=n[o];if(!e&&!gt(s)&&(s=a(s),i=a(i),!w(n)&&N(i)&&!N(s)))return i.value=s,!0;const c=w(n)&&U(o)?Number(o)<n.length:x(n,o),u=Reflect.set(n,o,s,r);return n===a(r)&&(c?W(s,i)&&h(n,"set",o,s):h(n,"add",o,s)),u}}function nt(e,t){const n=x(e,t);e[t];const o=Reflect.deleteProperty(e,t);return o&&n&&h(e,"delete",t,void 0),o}function st(e,t){const n=Reflect.has(e,t);return(!z(t)||!ae.has(t))&&f(e,"has",t),n}function ot(e){return f(e,"iterate",w(e)?"length":g),Reflect.ownKeys(e)}const rt={get:Qe,set:et,deleteProperty:nt,has:st,ownKeys:ot},it={get:Xe,set(e,t){return!0},deleteProperty(e,t){return!0}},Y=e=>e,S=e=>Reflect.getPrototypeOf(e);function j(e,t,n=!1,o=!1){e=e.__v_raw;const s=a(e),r=a(t);t!==r&&!n&&f(s,"get",t),!n&&f(s,"get",r);const{has:i}=S(s),c=o?Y:n?J:E;if(i.call(s,t))return c(e.get(t));if(i.call(s,r))return c(e.get(r));e!==s&&e.get(t)}function O(e,t=!1){const n=this.__v_raw,o=a(n),s=a(e);return e!==s&&!t&&f(o,"has",e),!t&&f(o,"has",s),e===s?n.has(e):n.has(e)||n.has(s)}function B(e,t=!1){return e=e.__v_raw,!t&&f(a(e),"iterate",g),Reflect.get(e,"size",e)}function de(e){e=a(e);const t=a(this);return S(t).has.call(t,e)||(t.add(e),h(t,"add",e,e)),this}function fe(e,t){t=a(t);const n=a(this),{has:o,get:s}=S(n);let r=o.call(n,e);r||(e=a(e),r=o.call(n,e));const i=s.call(n,e);return n.set(e,t),r?W(t,i)&&h(n,"set",e,t):h(n,"add",e,t),this}function pe(e){const t=a(this),{has:n,get:o}=S(t);let s=n.call(t,e);s||(e=a(e),s=n.call(t,e)),o&&o.call(t,e);const r=t.delete(e);return s&&h(t,"delete",e,void 0),r}function we(){const e=a(this),t=e.size!==0,n=e.clear();return t&&h(e,"clear",void 0,void 0),n}function A(e,t){return function(o,s){const r=this,i=r.__v_raw,c=a(i),u=t?Y:e?J:E;return!e&&f(c,"iterate",g),i.forEach((l,p)=>o.call(s,u(l),u(p),r))}}function K(e,t,n){return function(...o){const s=this.__v_raw,r=a(s),i=M(r),c=e==="entries"||e===Symbol.iterator&&i,u=e==="keys"&&i,l=s[e](...o),p=n?Y:t?J:E;return!t&&f(r,"iterate",u?q:g),{next(){const{value:d,done:C}=l.next();return C?{value:d,done:C}:{value:c?[p(d[0]),p(d[1])]:p(d),done:C}},[Symbol.iterator](){return this}}}}function _(e){return function(...t){return e==="delete"?!1:this}}function ct(){const e={get(r){return j(this,r)},get size(){return B(this)},has:O,add:de,set:fe,delete:pe,clear:we,forEach:A(!1,!1)},t={get(r){return j(this,r,!1,!0)},get size(){return B(this)},has:O,add:de,set:fe,delete:pe,clear:we,forEach:A(!1,!0)},n={get(r){return j(this,r,!0)},get size(){return B(this,!0)},has(r){return O.call(this,r,!0)},add:_("add"),set:_("set"),delete:_("delete"),clear:_("clear"),forEach:A(!0,!1)},o={get(r){return j(this,r,!0,!0)},get size(){return B(this,!0)},has(r){return O.call(this,r,!0)},add:_("add"),set:_("set"),delete:_("delete"),clear:_("clear"),forEach:A(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{e[r]=K(r,!1,!1),n[r]=K(r,!0,!1),t[r]=K(r,!1,!0),o[r]=K(r,!0,!0)}),[e,n,t,o]}const[at,lt,ut,dt]=ct();function he(e,t){const n=t?e?dt:ut:e?lt:at;return(o,s,r)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?o:Reflect.get(x(n,s)&&s in o?n:o,s,r)}const ft={get:he(!1,!1)},pt={get:he(!0,!1)},_e=new WeakMap,wt=new WeakMap,me=new WeakMap,ht=new WeakMap;function _t(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mt(e){return e.__v_skip||!Object.isExtensible(e)?0:_t(He(e))}function ge(e){return e&&e.__v_isReadonly?e:ve(e,!1,rt,ft,_e)}function Ve(e){return ve(e,!0,it,pt,me)}function ve(e,t,n,o,s){if(!R(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const r=s.get(e);if(r)return r;const i=mt(e);if(i===0)return e;const c=new Proxy(e,i===2?o:n);return s.set(e,c),c}function gt(e){return!!(e&&e.__v_isReadonly)}function a(e){const t=e&&e.__v_raw;return t?a(t):e}const E=e=>R(e)?ge(e):e,J=e=>R(e)?Ve(e):e;function Vt(e){ie()&&(e=a(e),e.dep||(e.dep=k()),ce(e.dep))}function vt(e,t){e=a(e),e.dep&&G(e.dep)}function N(e){return Boolean(e&&e.__v_isRef===!0)}function bt(e){return It(e,!1)}function It(e,t){return N(e)?e:new Et(e,t)}class Et{constructor(t,n){this._shallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:a(t),this._value=n?t:E(t)}get value(){return Vt(this),this._value}set value(t){t=this._shallow?t:a(t),W(t,this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:E(t),vt(this))}}Promise.resolve();const $t=window.Vue.defineComponent,Ct=window.Components.VDropdown,Dt=window.Components.VDropdownItem,xt=window.Components.VAvatar,Mt=$t({components:{VDropdown:Ct,VDropdownItem:Dt,VAvatar:xt},props:{field:{type:Object,required:!0},filter:{type:Object,required:!0},onUpdate:{type:Function,required:!0},page:{type:Object,required:!0}},setup(e){return bt(e.filter),{}}}),be=window.Vue.renderList,Ie=window.Vue.Fragment,$=window.Vue.openBlock,Q=window.Vue.createElementBlock,X=window.Vue.resolveComponent,Ee=window.Vue.createBlock,m=window.Vue.createElementVNode,$e=window.Vue.createVNode,Rt=window.Vue.toDisplayString,Z=window.Vue.withCtx,yt={class:"flex items-center justify-start"},Tt={class:"flex flex-shrink-0 -space-x-1"},St=m("button",{"aria-haspopup":"listbox","aria-expanded":"true","aria-labelledby":"listbox-label",type:"button",class:"h-7 w-7 focus:outline-none ring-2 ring-white dark:ring-gray-800 dark:bg-gray-700 inline-flex items-center justify-center bg-gray-300 rounded-full"},[m("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})])],-1),jt={class:"p-1"},Ot={class:"flex items-center space-x-2"},Bt={class:"whitespace-nowrap truncate"};function At(e,t,n,o,s,r){const i=X("base-avatar"),c=X("VDropdownItem"),u=X("VDropdown");return $(),Q("div",yt,[m("div",Tt,[($(!0),Q(Ie,null,be(e.assegneesRef,l=>($(),Ee(i,{key:l.id,user:l},null,8,["user"]))),128))]),m("div",null,[$e(u,{width:"64"},{trigger:Z(()=>[St]),default:Z(()=>[m("div",jt,[($(!0),Q(Ie,null,be(e.usersRef,l=>($(),Ee(c,{onClick:()=>e.addUser(l),role:"option",key:l.id,selected:e.assegneesRef.map(p=>p.id).includes(l.id)},{default:Z(()=>[m("div",Ot,[$e(i,{user:l},null,8,["user"]),m("span",Bt,Rt(l.name),1)])]),_:2},1032,["onClick","selected"]))),128))])]),_:1})])])}var Kt=v(Mt,[["render",At]]);document.addEventListener("taskday:init",()=>{Taskday.register("users",{field:Fe,filter:Kt})})});
