(function(c){typeof define=="function"&&define.amd?define(c):c()})(function(){"use strict";var c=(e,n)=>{const s=e.__vccOpts||e;for(const[t,r]of n)s[t]=r;return s};const D=window.Components.useField,y=window.Components.VAvatar,B=window.Components.VDropdown,h=window.Components.VDropdownButton,I=window.Components.VDropdownItems,F=window.Components.VDropdownItem,E=window.Components.VIcon,b=window.Vue.defineComponent,V=window.Vue.computed,j=b({components:{VAvatar:y,VDropdown:B,VDropdownButton:h,VDropdownItems:I,VDropdownItem:F,VIcon:E},props:{page:{type:Object,required:!0}},setup({page:e}){const{state:n,onChange:s}=D(),t=V(()=>{var o;return(o=e.props.global.users)!=null?o:[]}),r=V(()=>t.value.filter(o=>`${n.value}`.split(",").includes(`${o.id}`)));return{addUser:o=>{n.value.split(",").includes(`${o.id}`)?n.value=n.value.split(",").filter(a=>a!==`${o.id}`).join(",").trim(","):n.value=`${n.value},${o.id}`,s()},users:t,assegnees:r}}}),f=window.Vue.renderList,v=window.Vue.Fragment,l=window.Vue.openBlock,m=window.Vue.createElementBlock,d=window.Vue.resolveComponent,$=window.Vue.createBlock,_=window.Vue.createElementVNode,p=window.Vue.createVNode,u=window.Vue.withCtx,S=window.Vue.toDisplayString,A=window.Vue.withModifiers,N=window.Vue.normalizeClass,U={class:"flex items-center justify-start"},q={class:"flex flex-shrink-0 -space-x-1"};function x(e,n,s,t,r,w){const o=d("VAvatar"),a=d("VIcon"),R=d("VDropdownButton"),W=d("VDropdownItem"),X=d("VDropdownItems"),Y=d("VDropdown");return l(),m("div",U,[_("div",q,[(l(!0),m(v,null,f(e.assegnees,i=>(l(),$(o,{key:i.id,user:i},null,8,["user"]))),128))]),_("div",null,[p(Y,{width:"64"},{default:u(()=>[p(R,{class:"rounded-full p-0 h-8 w-8 flex items-center justify-center"},{default:u(()=>[p(a,{name:"plus"})]),_:1}),p(X,null,{default:u(()=>[(l(!0),m(v,null,f(e.users,i=>(l(),$(W,{key:i.id,onClick:A(()=>e.addUser(i),["prevent"]),class:N([{"font-semibold":e.assegnees.map(Z=>Z.id).includes(i.id)},"w-full block whitespace-nowrap truncate"])},{default:u(()=>[_("span",null,S(i.name),1)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1})])])}var L=c(j,[["render",x]]);const O=window.Vue.defineComponent,z=window.Vue.unref,M=window.Vue.toDisplayString,T=window.Vue.openBlock,G=window.Vue.createElementBlock,H=window.Vue.computed,J=O({props:{value:null,page:null},setup(e){const n=e,s=H(()=>n.page.props.global.users.filter(t=>`${n.value}`.split(",").includes(`${t.id}`)));return(t,r)=>(T(),G("span",null,M(z(s).map(w=>w.name).join(", ")),1))}}),K=window.Vue.defineComponent({props:{readonly:{type:Boolean,default:!1},value:{type:String,required:!1},page:{type:Object,required:!1}},components:{ViewField:J,EditField:L}}),g=window.Vue.resolveComponent,k=window.Vue.openBlock,C=window.Vue.createBlock;function P(e,n,s,t,r,w){const o=g("ViewField"),a=g("EditField");return e.readonly?(k(),C(o,{key:0,value:e.value,page:e.page},null,8,["value","page"])):(k(),C(a,{key:1,page:e.page},null,8,["page"]))}var Q=c(K,[["render",P]]);document.addEventListener("taskday:init",()=>{Taskday.register("users",{field:Q})})});
